module.exports = [
"[project]/node_modules/@chroma-core/openai/dist/openai.legacy-esm.js [app-route] (ecmascript)", ((__turbopack_context__) => {
"use strict";

// src/index.ts
__turbopack_context__.s([
    "OpenAIEmbeddingFunction",
    ()=>OpenAIEmbeddingFunction
]);
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$chromadb$2f$dist$2f$chromadb$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/chromadb/dist/chromadb.mjs [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$chroma$2d$core$2f$openai$2f$node_modules$2f$openai$2f$index$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__$3c$locals$3e$__ = __turbopack_context__.i("[project]/node_modules/@chroma-core/openai/node_modules/openai/index.mjs [app-route] (ecmascript) <locals>");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$chroma$2d$core$2f$ai$2d$embeddings$2d$common$2f$dist$2f$index$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/@chroma-core/ai-embeddings-common/dist/index.mjs [app-route] (ecmascript)");
;
;
;
var NAME = "openai";
var OpenAIEmbeddingFunction = class _OpenAIEmbeddingFunction {
    constructor(args){
        this.name = NAME;
        const { apiKeyEnvVar = "OPENAI_API_KEY", modelName, dimensions, organizationId } = args;
        const apiKey = args.apiKey || process.env[apiKeyEnvVar];
        if (!apiKey) {
            throw new Error(`OpenAI API key is required. Please provide it in the constructor or set the environment variable ${apiKeyEnvVar}.`);
        }
        this.modelName = modelName;
        this.organizationId = organizationId;
        this.apiKeyEnvVar = apiKeyEnvVar;
        this.dimensions = dimensions;
        this.client = new __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$chroma$2d$core$2f$openai$2f$node_modules$2f$openai$2f$index$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__$3c$locals$3e$__["default"]({
            apiKey,
            organization: this.organizationId
        });
    }
    async generate(texts) {
        const response = await this.client.embeddings.create({
            input: texts,
            model: this.modelName,
            dimensions: this.dimensions
        });
        return response.data.map((e)=>e.embedding);
    }
    defaultSpace() {
        return "cosine";
    }
    supportedSpaces() {
        return [
            "cosine",
            "l2",
            "ip"
        ];
    }
    static buildFromConfig(config) {
        return new _OpenAIEmbeddingFunction({
            apiKeyEnvVar: config.api_key_env_var,
            modelName: config.model_name,
            organizationId: config.organization_id,
            dimensions: config.dimensions
        });
    }
    getConfig() {
        return {
            api_key_env_var: this.apiKeyEnvVar,
            model_name: this.modelName,
            organization_id: this.organizationId,
            dimensions: this.dimensions
        };
    }
    validateConfigUpdate(newConfig) {
        if (this.getConfig().model_name !== newConfig.model_name) {
            throw new __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$chromadb$2f$dist$2f$chromadb$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__["ChromaValueError"]("Model name cannot be updated");
        }
    }
    static validateConfig(config) {
        (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$chroma$2d$core$2f$ai$2d$embeddings$2d$common$2f$dist$2f$index$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__["validateConfigSchema"])(config, NAME);
    }
};
(0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$chromadb$2f$dist$2f$chromadb$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__["registerEmbeddingFunction"])(NAME, OpenAIEmbeddingFunction);
;
 //# sourceMappingURL=openai.mjs.map
}),
];

//# sourceMappingURL=node_modules_%40chroma-core_openai_dist_openai_legacy-esm_d9d38997.js.map