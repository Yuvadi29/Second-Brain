{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 82, "column": 0}, "map": {"version":3,"sources":["file:///Users/adityatrivedi/Desktop/Dev/Second-Brain/second-brain/lib/chromaClient.ts"],"sourcesContent":["\nimport { CloudClient } from \"chromadb\";\nimport dotenv from \"dotenv\";\n\ndotenv.config();\n\nconst apiKey = process.env.CHROMA_API_KEY!;\nconst tenant = process.env.CHROMA_TENANT!;\nconst database = process.env.CHROMA_DATABASE!;\n\nif (!apiKey || !tenant || !database) {\n  throw new Error(\"CHROMA_API_KEY, CHROMA_TENANT, CHROMA_DATABASE must be set\");\n}\n\nexport const chroma = new CloudClient({\n  apiKey,\n  tenant,\n  database,\n})\n\nexport async function getOrCreateCollection(name: string) {\n  return chroma.getOrCreateCollection({\n    name,\n  });\n}\n"],"names":[],"mappings":";;;;;;AACA;AACA;;;;;;;AAEA,kJAAM,CAAC,MAAM;AAEb,MAAM,SAAS,QAAQ,GAAG,CAAC,cAAc;AACzC,MAAM,SAAS,QAAQ,GAAG,CAAC,aAAa;AACxC,MAAM,WAAW,QAAQ,GAAG,CAAC,eAAe;AAE5C,IAAI,CAAC,UAAU,CAAC,UAAU,CAAC,UAAU;IACnC,MAAM,IAAI,MAAM;AAClB;AAEO,MAAM,SAAS,IAAI,+HAAW,CAAC;IACpC;IACA;IACA;AACF;AAEO,eAAe,sBAAsB,IAAY;IACtD,OAAO,OAAO,qBAAqB,CAAC;QAClC;IACF;AACF"}},
    {"offset": {"line": 120, "column": 0}, "map": {"version":3,"sources":["file:///Users/adityatrivedi/Desktop/Dev/Second-Brain/second-brain/lib/chunkAndIngest.ts"],"sourcesContent":["\"use server\";\n\nimport { RecursiveCharacterTextSplitter } from \"@langchain/textsplitters\";\nimport { getOrCreateCollection } from \"./chromaClient\";\n\nexport async function ingestTextIntoChroma(\n    collectionName: string,\n    filePath: string,\n    text: string,\n    metadata: Record<string, any> = {}\n) {\n    const splitter = new RecursiveCharacterTextSplitter({\n        chunkSize: 1200,\n        chunkOverlap: 200,\n    });\n\n    const chunks = await splitter.splitText(text);\n    const collection = await getOrCreateCollection(collectionName);\n\n    await collection?.add({\n        ids: chunks?.map((_, i) => `${filePath}::${i}`),\n        documents: chunks,\n        metadatas: chunks?.map((_, i) => ({\n            ...metadata,\n            filePath,\n            chunkIndex: i\n        })),\n    });\n\n    console.log(`Ingested ${chunks?.length} chunks from ${filePath}`);\n\n\n}"],"names":[],"mappings":";;;;;AAEA;AAAA;AACA;;;;;;;;;AAEO,eAAe,qBAClB,cAAsB,EACtB,QAAgB,EAChB,IAAY,EACZ,WAAgC,CAAC,CAAC;IAElC,MAAM,WAAW,IAAI,yMAA8B,CAAC;QAChD,WAAW;QACX,cAAc;IAClB;IAEA,MAAM,SAAS,MAAM,SAAS,SAAS,CAAC;IACxC,MAAM,aAAa,MAAM,IAAA,8IAAqB,EAAC;IAE/C,MAAM,YAAY,IAAI;QAClB,KAAK,QAAQ,IAAI,CAAC,GAAG,IAAM,GAAG,SAAS,EAAE,EAAE,GAAG;QAC9C,WAAW;QACX,WAAW,QAAQ,IAAI,CAAC,GAAG,IAAM,CAAC;gBAC9B,GAAG,QAAQ;gBACX;gBACA,YAAY;YAChB,CAAC;IACL;IAEA,QAAQ,GAAG,CAAC,CAAC,SAAS,EAAE,QAAQ,OAAO,aAAa,EAAE,UAAU;AAGpE;;;IA3BsB;;AAAA,iPAAA"}},
    {"offset": {"line": 166, "column": 0}, "map": {"version":3,"sources":["file:///Users/adityatrivedi/Desktop/Dev/Second-Brain/second-brain/app/api/injest/test/route.ts"],"sourcesContent":["import { ingestTextIntoChroma } from \"@/lib/chunkAndIngest\";\n\nexport async function POST() {\n    await ingestTextIntoChroma(\n        \"secondbrain\",\n        \"manual-test-file.md\",\n        `\n# Testing Chunking\n\nSection 1 text for the test. This should chunk based on size.\n\nSection 2 more text. Keep adding more to simulate long file ingestion.\n`.repeat(20)\n    );\n\n    return Response.json({ ok: true });\n}\n"],"names":[],"mappings":";;;;AAAA;;;;;;AAEO,eAAe;IAClB,MAAM,IAAA,+IAAoB,EACtB,eACA,uBACA,CAAC;;;;;;AAMT,CAAC,CAAC,MAAM,CAAC;IAGL,OAAO,SAAS,IAAI,CAAC;QAAE,IAAI;IAAK;AACpC"}}]
}