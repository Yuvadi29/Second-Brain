{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 76, "column": 0}, "map": {"version":3,"sources":["file:///Users/adityatrivedi/Desktop/Dev/Second-Brain/second-brain/lib/chromaClient.ts"],"sourcesContent":["\nimport { CloudClient } from \"chromadb\";\nimport dotenv from \"dotenv\";\n\ndotenv.config();\n\nconst apiKey = process.env.CHROMA_API_KEY!;\nconst tenant = process.env.CHROMA_TENANT!;\nconst database = process.env.CHROMA_DATABASE!;\nconst cloudHost = process.env.CHROMA_CLOUD_HOST || \"api.trychroma.com\";\nconst cloudPort = process.env.CHROMA_CLOUD_PORT || \"8000\";\nconst CHROMA_URL = process.env.CHROMA_URL || \"http://localhost:8000\";\n\nif (!apiKey || !tenant || !database) {\n  throw new Error(\"CHROMA_API_KEY, CHROMA_TENANT, CHROMA_DATABASE must be set\");\n}\n\nexport const chroma = new CloudClient({\n  apiKey,\n  tenant,\n  database,\n  // cloudHost,\n  // cloudPort\n})\n\nexport async function getOrCreateCollection(name: string) {\n  return chroma.getOrCreateCollection({\n    name,\n  });\n}\n"],"names":[],"mappings":";;;;;;AACA;AACA;;;;;;;AAEA,kJAAM,CAAC,MAAM;AAEb,MAAM,SAAS,QAAQ,GAAG,CAAC,cAAc;AACzC,MAAM,SAAS,QAAQ,GAAG,CAAC,aAAa;AACxC,MAAM,WAAW,QAAQ,GAAG,CAAC,eAAe;AAC5C,MAAM,YAAY,QAAQ,GAAG,CAAC,iBAAiB,IAAI;AACnD,MAAM,YAAY,QAAQ,GAAG,CAAC,iBAAiB,IAAI;AACnD,MAAM,aAAa,QAAQ,GAAG,CAAC,UAAU,IAAI;AAE7C,IAAI,CAAC,UAAU,CAAC,UAAU,CAAC,UAAU;IACnC,MAAM,IAAI,MAAM;AAClB;AAEO,MAAM,SAAS,IAAI,+HAAW,CAAC;IACpC;IACA;IACA;AAGF;AAEO,eAAe,sBAAsB,IAAY;IACtD,OAAO,OAAO,qBAAqB,CAAC;QAClC;IACF;AACF"}},
    {"offset": {"line": 117, "column": 0}, "map": {"version":3,"sources":["file:///Users/adityatrivedi/Desktop/Dev/Second-Brain/second-brain/app/api/injest/route.ts"],"sourcesContent":["import { getOrCreateCollection } from \"@/lib/chromaClient\";\nimport { NextRequest } from \"next/server\";\n\nexport const runtime = \"nodejs\";\n\nexport async function POST(req: NextRequest) {\n  try {\n    const body = await req.json();\n    const {\n      collectionName = \"secondbrain\",\n      filePath,\n      fileContent,\n      metadata\n    } = body;\n\n    if (!filePath || !fileContent) {\n      return Response.json({\n        error: \"FilePath and File Content are required\"\n      }, { status: 400 });\n    }\n\n    const collection = await getOrCreateCollection(collectionName);\n\n    await collection?.add({\n      ids: [filePath],\n      documents: [fileContent],\n      metadatas: [metadata ?? {}],\n    });\n\n    return Response?.json({ ok: true });\n  } catch (err) {\n    console.error(\"Chroma ingest error:\", err);\n    return Response.json({ error: \"ingest failed\" }, { status: 500 });\n  }\n}"],"names":[],"mappings":";;;;;;AAAA;;;;;;AAGO,MAAM,UAAU;AAEhB,eAAe,KAAK,GAAgB;IACzC,IAAI;QACF,MAAM,OAAO,MAAM,IAAI,IAAI;QAC3B,MAAM,EACJ,iBAAiB,aAAa,EAC9B,QAAQ,EACR,WAAW,EACX,QAAQ,EACT,GAAG;QAEJ,IAAI,CAAC,YAAY,CAAC,aAAa;YAC7B,OAAO,SAAS,IAAI,CAAC;gBACnB,OAAO;YACT,GAAG;gBAAE,QAAQ;YAAI;QACnB;QAEA,MAAM,aAAa,MAAM,IAAA,8IAAqB,EAAC;QAE/C,MAAM,YAAY,IAAI;YACpB,KAAK;gBAAC;aAAS;YACf,WAAW;gBAAC;aAAY;YACxB,WAAW;gBAAC,YAAY,CAAC;aAAE;QAC7B;QAEA,OAAO,UAAU,KAAK;YAAE,IAAI;QAAK;IACnC,EAAE,OAAO,KAAK;QACZ,QAAQ,KAAK,CAAC,wBAAwB;QACtC,OAAO,SAAS,IAAI,CAAC;YAAE,OAAO;QAAgB,GAAG;YAAE,QAAQ;QAAI;IACjE;AACF"}}]
}