{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 76, "column": 0}, "map": {"version":3,"sources":["file:///Users/adityatrivedi/Desktop/Dev/Second-Brain/second-brain/lib/chromaClient.ts"],"sourcesContent":["\nimport { CloudClient } from \"chromadb\";\nimport dotenv from \"dotenv\";\n\ndotenv.config();\n\nconst apiKey = process.env.CHROMA_API_KEY!;\nconst tenant = process.env.CHROMA_TENANT!;\nconst database = process.env.CHROMA_DATABASE!;\n\nif (!apiKey || !tenant || !database) {\n  throw new Error(\"CHROMA_API_KEY, CHROMA_TENANT, CHROMA_DATABASE must be set\");\n}\n\nexport const chroma = new CloudClient({\n  apiKey,\n  tenant,\n  database,\n})\n\nexport async function getOrCreateCollection(name: string) {\n  return chroma.getOrCreateCollection({\n    name,\n  });\n}\n"],"names":[],"mappings":";;;;;;AACA;AACA;;;;;;;AAEA,kJAAM,CAAC,MAAM;AAEb,MAAM,SAAS,QAAQ,GAAG,CAAC,cAAc;AACzC,MAAM,SAAS,QAAQ,GAAG,CAAC,aAAa;AACxC,MAAM,WAAW,QAAQ,GAAG,CAAC,eAAe;AAE5C,IAAI,CAAC,UAAU,CAAC,UAAU,CAAC,UAAU;IACnC,MAAM,IAAI,MAAM;AAClB;AAEO,MAAM,SAAS,IAAI,+HAAW,CAAC;IACpC;IACA;IACA;AACF;AAEO,eAAe,sBAAsB,IAAY;IACtD,OAAO,OAAO,qBAAqB,CAAC;QAClC;IACF;AACF"}},
    {"offset": {"line": 114, "column": 0}, "map": {"version":3,"sources":["file:///Users/adityatrivedi/Desktop/Dev/Second-Brain/second-brain/lib/chunkAndIngest.ts"],"sourcesContent":["\"use server\";\n\nimport { RecursiveCharacterTextSplitter } from \"@langchain/textsplitters\";\nimport { getOrCreateCollection } from \"./chromaClient\";\n\nexport async function ingestTextIntoChroma(\n    collectionName: string,\n    filePath: string,\n    text: string,\n    metadata: Record<string, any> = {}\n) {\n    const splitter = new RecursiveCharacterTextSplitter({\n        chunkSize: 1200,\n        chunkOverlap: 200,\n    });\n\n    const chunks = await splitter.splitText(text);\n    const collection = await getOrCreateCollection(collectionName);\n\n    await collection?.add({\n        ids: chunks?.map((_, i) => `${filePath}::${i}`),\n        documents: chunks,\n        metadatas: chunks?.map((_, i) => ({\n            ...metadata,\n            filePath,\n            chunkIndex: i\n        })),\n    });\n\n    console.log(`Ingested ${chunks?.length} chunks from ${filePath}`);\n\n\n}"],"names":[],"mappings":";;;;;AAEA;AAAA;AACA;;;;;;;;;AAEO,eAAe,qBAClB,cAAsB,EACtB,QAAgB,EAChB,IAAY,EACZ,WAAgC,CAAC,CAAC;IAElC,MAAM,WAAW,IAAI,yMAA8B,CAAC;QAChD,WAAW;QACX,cAAc;IAClB;IAEA,MAAM,SAAS,MAAM,SAAS,SAAS,CAAC;IACxC,MAAM,aAAa,MAAM,IAAA,8IAAqB,EAAC;IAE/C,MAAM,YAAY,IAAI;QAClB,KAAK,QAAQ,IAAI,CAAC,GAAG,IAAM,GAAG,SAAS,EAAE,EAAE,GAAG;QAC9C,WAAW;QACX,WAAW,QAAQ,IAAI,CAAC,GAAG,IAAM,CAAC;gBAC9B,GAAG,QAAQ;gBACX;gBACA,YAAY;YAChB,CAAC;IACL;IAEA,QAAQ,GAAG,CAAC,CAAC,SAAS,EAAE,QAAQ,OAAO,aAAa,EAAE,UAAU;AAGpE;;;IA3BsB;;AAAA,iPAAA"}},
    {"offset": {"line": 160, "column": 0}, "map": {"version":3,"sources":["file:///Users/adityatrivedi/Desktop/Dev/Second-Brain/second-brain/app/api/injest/test/route.ts"],"sourcesContent":["// app/api/dev/ingest-upi/route.ts\nimport { ingestTextIntoChroma } from \"@/lib/chunkAndIngest\";\n\nexport const runtime = \"nodejs\";\n\nconst UPI_TEXT = `\n### Traditional Approach for Payments in India UPI\nTraditional System for Payments in India work on the basis of banks. Users must have a bank account to make payments. They can have their accounts in any of the banks like ICICI, HDFC, SBI, HSBC, etc. \nAll these banks are regulated by RBI which is the Reserve Bank of India\n\nEach user has the following unique details in their bank, irrespective of the bank that they have their account in:\n\\t- Account Number\n\\t- Bank Name\n\\t- Branch Code\n\\t- IFSC Code\nSay, me as a user want to make a payment to Anil. So, to make the transaction, i will need the above details of Anil. Here, I will need the Account Details of Anil to make the transaction complete, without that there will not be any transaction done.\nNow, to make the payment, there are different services that are used. \n\\t- For Small transaction like 1000, 2000, etc we use IMPS which is Immediate Payment Service\n\\t- For Medium Transaction like 50,000 , 1,00,000 etc we use NEFT which is National Electronic Funds Transfer. Here the catch is that it will take hours to get reflected into the receivers account. For this , people usually save up a screenshot of their transaction stating that user 1 has already payed, and it will take some hours for the amount to get reflected on user 2's bank.\n\\t- For High Transaction like 5,00,000 , 20,00,000 etc RTGS which is Realtime-Gross-Settlement\nThis is the traditional approach on the payment transfer.\n***How UPI Revolutionized the Way Payment Works ?\nFirst of all UPI stands for Unified Payment Interface. It is an instant real-time payment system developed by NPCI which is National Payments Corporation of India. \nThe way UPI is changing the way things work is by saying 'Ok, we don't want to go through all the traditional of money transfer, we want to change it and make it very simple '. This is how it works:\nNPCI acts as the Payment Infrastructure. \nThe APIs provided by NPCI are not publicly available, hence not everyone can communicate with NPCI network.\nNPCI has a list of trusted banks with which it communicates. It includes HDFC, ICICI, SBI, etc. Meaning, only these banks can communicate with the NPCI's API. \n Now say, user wants to make a transaction, he or she cannot directly communicate with the api of NPCI. So, for that we have PSP (Payment Service Provider). This is basically a third party entity that facilitates electronic payment transactions for merchants. Some of the Customer PSPs are GooglePay, PhonePay, SuperMoney etc. \nNow here what we do is, we have a QR Code . We scan it to make the payments. We need an address to make the payments. QR Code contains the VPA of that user. VPA stands for Virutal Payment Address. It works like username@handle. \nNow say i want to make the payment from aditya@hdfc to anil@icici. I cannot directly go to NPCI as it only communicates with the trusted banks. So what happens is the PSP calls the banks with which it has its tie up. Say i am using GooglePay which has the tieup to HDFC Bank, it will communicate with the HDFC Bank for the transaction.\nWhile making the payment, it would create an intent which would be like:\n\\tfrom:aditya@hdfc\n\\tto:anil@icici\n\\tamount: 5000\nNow this payment request goes to HDFC Bank, which then sends it to NPCI asking for the payment from aditya to anil of Rs 5000. \nNPCI then asks if the amount is available in the sender's bank, that is when we get a screen on putting the PIN for the payment.  Once the amount is debited, it then sends a notification to user that the amount has been debited. NPCI now sends a request to the receiver's bank asking to credit the amount. If the server is busy, it will fail to response. That is when we get a notification that the receiver's server is busy. If it is not busy, the amount will be credited to the user2 and they will receive a message of credit.\nNPCI has just made this possible using the from and to VPA(Virtual Payment Address).\n`;\n\nexport async function POST() {\n  await ingestTextIntoChroma(\n    \"secondbrain\",\n    \"knowledge/upi-payments.md\", // filePath used as ID prefix\n    UPI_TEXT,\n    { source: \"dev-test\" }\n  );\n\n  return new Response(\"Ingested UPI doc\", { status: 200 });\n}\n"],"names":[],"mappings":"AAAA,kCAAkC;;;;;;;AAClC;;;;;;AAEO,MAAM,UAAU;AAEvB,MAAM,WAAW,CAAC;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAgClB,CAAC;AAEM,eAAe;IACpB,MAAM,IAAA,+IAAoB,EACxB,eACA,6BACA,UACA;QAAE,QAAQ;IAAW;IAGvB,OAAO,IAAI,SAAS,oBAAoB;QAAE,QAAQ;IAAI;AACxD"}}]
}